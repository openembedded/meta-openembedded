From 17e9da8d3c3c69f84e11c0457bd9fb8c4ee4274b Mon Sep 17 00:00:00 2001
From: Andrea Adami <andrea.adami@gmail.com>
Date: Tue, 17 Apr 2018 11:35:14 +0200
Subject: [PATCH] kexec.c: add guard around ENOTSUP

Fix

 kexec.c: In function 'main':
 kexec.c:1515:11: error: 'ENOTSUP' undeclared

Upstream-Status: Inappropriate [klibc specific]
Signed-off-by: Andrea Adami <andrea.adami@gmail.com>

---
 kexec/kexec.c | 2 ++
 1 file changed, 2 insertions(+)

--- a/kexec/kexec.c
+++ b/kexec/kexec.c
@@ -1421,12 +1421,14 @@ static int do_kexec_file_load(int filein
 			 */
 		case EINVAL:
 		case ENOEXEC:
+#ifndef __KLIBC__
 			/*
 			 * ENOTSUP can be unsupported image
 			 * type or unsupported PE signature
 			 * wrapper type, duh.
 			 */
 		case ENOTSUP:
+#endif
 			ret = EFALLBACK;
 			break;
 		}
