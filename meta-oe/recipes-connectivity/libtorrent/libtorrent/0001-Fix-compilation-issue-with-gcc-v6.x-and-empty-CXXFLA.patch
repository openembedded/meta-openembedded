From c2b119de0e66fb047bb20e445ac8e25824448858 Mon Sep 17 00:00:00 2001
From: chros <chros@chrosGX620>
Date: Sun, 30 Jul 2017 20:34:47 +0100
Subject: [PATCH] Fix compilation issue with gcc v6.x and empty CXXFLAGS (See
 #10)

---
 configure.ac            |  1 +
 scripts/rak_compiler.m4 | 13 +++++++++++++
 2 files changed, 14 insertions(+)

diff --git a/configure.ac b/configure.ac
index 65e34872..2f29e3f9 100644
--- a/configure.ac
+++ b/configure.ac
@@ -28,6 +28,7 @@ AC_C_BIGENDIAN(
     AC_MSG_ERROR([Could not determine endianness])
 )
 
+RAK_CHECK_CXXFLAGS
 RAK_ENABLE_DEBUG
 RAK_ENABLE_EXTRA_DEBUG
 RAK_ENABLE_WERROR
diff --git a/scripts/rak_compiler.m4 b/scripts/rak_compiler.m4
index 39bd19a7..87871abf 100644
--- a/scripts/rak_compiler.m4
+++ b/scripts/rak_compiler.m4
@@ -1,3 +1,16 @@
+AC_DEFUN([RAK_CHECK_CXXFLAGS], [
+
+  AC_MSG_CHECKING([for user-defined CXXFLAGS])
+
+  if test -n "$CXXFLAGS"; then
+    AC_MSG_RESULT([user-defined "$CXXFLAGS"])
+  else
+    CXXFLAGS="-O2"
+    AC_MSG_RESULT([default "$CXXFLAGS"])
+  fi
+])
+
+
 AC_DEFUN([RAK_ENABLE_DEBUG], [
   AC_ARG_ENABLE(debug,
     AC_HELP_STRING([--enable-debug], [enable debug information [[default=yes]]]),
